(function(t){function e(e){for(var s,a,i=e[0],l=e[1],c=e[2],g=0,d=[];g<i.length;g++)a=i[g],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&d.push(n[a][0]),n[a]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],s=!0,i=1;i<o.length;i++){var l=o[i];0!==n[l]&&(s=!1)}s&&(r.splice(e--,1),t=a(a.s=o[0]))}return t}var s={},n={app:0},r=[];function a(e){if(s[e])return s[e].exports;var o=s[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=s,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(o,s,function(e){return t[e]}.bind(null,s));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"0659":function(t,e,o){"use strict";var s=o("8475"),n=o.n(s);n.a},"0f62":function(t,e,o){t.exports=o.p+"img/user.f17404b4.svg"},1:function(t,e){},3298:function(t,e,o){"use strict";var s=o("b911"),n=o.n(s);n.a},"36be":function(t,e,o){t.exports=o.p+"img/menu.fb3157bd.svg"},4042:function(t,e,o){"use strict";var s=o("da96"),n=o.n(s);n.a},5452:function(t,e,o){"use strict";var s=o("af35"),n=o.n(s);n.a},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var s=o("2b0e"),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("div",[o("Header",{attrs:{auth:t.auth,user:t.user},on:{logout:t.logout}}),t.auth?t._e():o("authorization",{staticClass:"pageContent",attrs:{user:t.user},on:{login:t.Login}}),t.auth?o("router-view",{staticClass:"pageContent",attrs:{user:t.user},on:{login:t.Login}}):t._e()],1)])},r=[],a=o("bc3a"),i=o.n(a),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("header",[t.auth?s("div",{staticClass:"container"},[s("div",{staticClass:"hamburger",class:{active:t.openMenu},on:{click:function(e){t.openMenu=!t.openMenu}}},[s("img",{attrs:{src:o("36be"),alt:""}})]),s("ul",{staticClass:"topMenu",class:{active:t.openMenu}},[s("router-link",{staticClass:"nav-item",attrs:{tag:"li",exact:"",to:"/home","active-class":"active"}},[s("a",{staticClass:"nav-link",on:{click:function(e){return t.menu()}}},[t._v("Home")])]),s("router-link",{staticClass:"nav-item",attrs:{tag:"li",exact:"",to:"/chat"}},[s("a",{staticClass:"nav-link",on:{click:function(e){return t.menu()}}},[t._v("Chat")])]),s("router-link",{staticClass:"nav-item",attrs:{tag:"li",exact:"",to:"/"}},[s("a",{staticClass:"nav-link",on:{click:function(e){return t.menu()}}},[t._v("ToDoList")])]),s("router-link",{staticClass:"nav-item",attrs:{tag:"li",exact:"",to:"/"}},[s("a",{staticClass:"nav-link",on:{click:function(e){return t.menu()}}},[t._v("Game")])]),s("div",{staticClass:"userHeaderBlock"},[s("p",{staticClass:"signOut",on:{click:function(e){t.signOut(),t.menu()}}},[t._v("Sign out")]),s("p",{staticClass:"loginName"},[t._v(t._s(t.user.login))]),t.user.logoUrl?s("div",{staticClass:"userImg"},[s("img",{attrs:{src:t.user.logoUrl,alt:""}})]):s("div",{staticClass:"loginImg"},[s("img",{attrs:{src:o("0f62"),alt:""}})])])],1)]):t._e()])])},c=[],u={name:"Header.vue",data:function(){return{openMenu:!1}},props:{user:Object,auth:Boolean},methods:{signOut:function(){var t=this;i()({method:"get",url:"http://localhost:5000/logout",crossDomain:!0,withCredentials:!0}).then((function(e){200==e.status&&t.$emit("logout",t.user)}))},menu:function(){this.openMenu=!1}},components:{}},g=u,d=(o("5452"),o("2877")),p=Object(d["a"])(g,l,c,!1,null,null,null),h=p.exports,m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"auth"},[o("div",{staticClass:"container"},[o("div",{staticClass:"regAutMenu"},[t.reg?o("form",{attrs:{id:"authorization"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.authorization()}}},[o("h2",{staticClass:"title"},[t._v("Authorization")]),o("p",{staticClass:"errorMsg"},[t._v(t._s(t.errorMsg))]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"login"}},[t._v("Login")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"form-control",attrs:{type:"text",id:"login","aria-describedby":"messageHelp",placeholder:"Enter Login"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"password"}},[t._v("Password")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"text",id:"password","aria-describedby":"messageHelp",placeholder:"Enter Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),o("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(e){return t.authorization()}}},[t._v("Sing in")])]):o("form",{attrs:{id:"registration"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.registration()}}},[o("h2",{staticClass:"title"},[t._v("Registration")]),o("p",{staticClass:"errorMsg"},[t._v(t._s(t.errorMsg))]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"reg-login"}},[t._v("Login")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.regLogin,expression:"regLogin"}],staticClass:"form-control",attrs:{type:"text",id:"reg-login","aria-describedby":"messageHelp",placeholder:"Enter login"},domProps:{value:t.regLogin},on:{input:function(e){e.target.composing||(t.regLogin=e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"reg-password"}},[t._v("Password")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.regPass,expression:"regPass"}],staticClass:"form-control",attrs:{type:"text",id:"reg-password","aria-describedby":"messageHelp",placeholder:"Enter pasword"},domProps:{value:t.regPass},on:{input:function(e){e.target.composing||(t.regPass=e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"reg-rep-password"}},[t._v("Repeat password")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.repPass,expression:"repPass"}],staticClass:"form-control",attrs:{type:"text",id:"reg-rep-password","aria-describedby":"messageHelp",placeholder:"repeat passworde"},domProps:{value:t.repPass},on:{input:function(e){e.target.composing||(t.repPass=e.target.value)}}})]),o("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(e){return t.registration()}}},[t._v("Sing up")])]),o("span",{staticClass:"tougle",class:{active:t.reg},on:{click:function(e){return t.regTougle(!0)}}},[t._v("Login")]),o("span",{staticClass:"tougle",class:{active:!t.reg},on:{click:function(e){return t.regTougle(!1)}}},[t._v("Create Account")])])])])},f=[],v={name:"Home",data:function(){return{reg:!0,login:"",password:"",regLogin:"",regPass:"",repPass:"",errorMsg:""}},components:{},methods:{regTougle:function(t){this.reg=t,this.errorMsg=""},authorization:function(){var t=this;console.log("authorization"),i.a.defaults.withCredentials=!0,i()({method:"post",url:"http://localhost:5000/authorization",crossDomain:!0,headers:{"Access-Control-Allow-Headers":"Content-Type","Access-Control-Allow-Credentials":!0,"Access-Control-Allow-Origin":"http://localhost/","Access-Control-Allow-Methods":"GET, POST"},data:{login:this.login,password:this.password}}).then((function(e){console.log(e);var o={login:e.data.login};e.data.logoUrl&&(o.logoUrl="http://localhost:5000/"+e.data.logoUrl),t.$emit("login",o)})).catch((function(e){console.log(e.response.data),console.log(e.response.status),t.errorMsg="The login or password is incorrect"}))},registration:function(){var t=this;this.repPass==this.regPass?(console.log("registration"),i.a.defaults.withCredentials=!0,i()({method:"post",url:"http://localhost:5000/registration",crossDomain:!0,headers:{"Access-Control-Allow-Headers":"Content-Type","Access-Control-Allow-Credentials":!0,"Access-Control-Allow-Origin":"http://localhost","Access-Control-Allow-Methods":"GET, POST"},data:{login:this.regLogin,password:this.regPass}}).then((function(e){console.log(e);var o={login:e.data.login};e.data.logoUrl&&(o.logoUrl="http://localhost:5000/"+e.data.logoUrl),t.$emit("login",o)})).catch((function(e){switch(console.log(e.response.data),console.log(e.response.status),e.response.data){case"name is already taken":t.errorMsg="Name is already taken";break;case"errorPassword":t.errorMsg="Your password must be between 5 and 30 characters";break;case"errorLogin":t.errorMsg="Your login must be between 5 and 30 characters";break;case"errorSymbol":t.errorMsg="Your login must be only letters and numbers";break;default:break}}))):this.errorMsg="Passwords do not match"}}},b=v,C=(o("3298"),Object(d["a"])(b,m,f,!1,null,null,null)),y=C.exports,k={name:"app",data:function(){return{user:{},auth:!1}},components:{Header:h,authorization:y},methods:{Login:function(t){this.auth=!0,this.user=t},logout:function(){this.auth=!1,this.user=null}},beforeCreate:function(){var t=this;i()({method:"get",url:"http://localhost:5000/",crossDomain:!0,withCredentials:!0}).then((function(e){console.log(e.data.login),t.user.login=e.data.login,t.auth=!0,e.data.logoUrl&&(t.user.logoUrl="http://localhost:5000/"+e.data.logoUrl)}))}},w=k,_=(o("5c0b"),Object(d["a"])(w,n,r,!1,null,null,null)),x=_.exports,M=o("8c4f"),P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ChatPage"},[s("h1",[t._v("Home")]),t.user.logoUrl?s("div",{staticClass:"changeImg",on:{click:function(e){return t.OpenFileSelect()}}},[s("img",{attrs:{src:t.user.logoUrl}}),s("p",[t._v("click to change photo")])]):s("div",{staticClass:"selectImg",on:{click:function(e){return t.OpenFileSelect()}}},[s("img",{attrs:{src:o("0f62")}}),s("p",[t._v("click to upload photo")])]),t._v(" "+t._s(t.errorMsg)+" "),s("form",{attrs:{method:"post",enctype:"multipart/form-data",id:"form-logo-upload"}},[s("input",{staticClass:"inputFile",attrs:{type:"file",name:"filedata",id:"logo-upload",accept:"image/*"},on:{change:function(e){return t.UploadLogo()}}})])])},O=[],H={name:"HomePage",data:function(){return{errorMsg:""}},props:{msg:String,user:Object},methods:{OpenFileSelect:function(){var t=document.getElementById("logo-upload");t&&t.click()},UploadLogo:function(){var t=this,e=document.getElementById("form-logo-upload"),o=new FormData(e);i()({method:"post",url:"http://localhost:5000/uploadImg",crossDomain:!0,withCredentials:!0,data:o}).then((function(e){console.log(e.data.logoUrl);var o={login:e.data.login,logoUrl:"http://localhost:5000/"+e.data.logoUrl};t.$emit("login",o),t.errorMsg="",console.log("file downloaded")})).catch((function(e){switch(console.log(e),e.response.data){case"file too big":t.errorMsg="file too big";break;case"wrong format":t.errorMsg="wrong format";break;default:t.errorMsg="unknown error";break}}))}}},T=H,L=(o("4042"),Object(d["a"])(T,P,O,!1,null,null,null)),S=L.exports,U=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("h1",[t._v("Chat")]),o("div",{staticClass:"chat"},[o("ul",{ref:"chat",staticClass:"chatContent scroll",attrs:{id:"all_messages"},on:{scroll:t.onScroll}},t._l(t.chatHistory,(function(e){return o("li",{key:e.id,class:{ownMessage:e.user==t.user.login}},[o("div",{staticClass:"chatMessage"},[o("p",{staticClass:"messageUser"},[t._v(t._s(e.user))]),t._v(" "),o("span",{staticClass:"message"},[t._v(t._s(e.msg)+" ")]),t._v(" "),o("span",{staticClass:"messageTime"},[t._v(" "+t._s(e.time))])])])})),0),o("div",{staticClass:"messageForm",attrs:{id:"messForm"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.clickButton()}}},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textMessage,expression:"textMessage"}],staticClass:"form-control scroll",attrs:{type:"text",id:"message","aria-describedby":"messageHelp",placeholder:"Enter Message","resize:":"",none:"",required:""},domProps:{value:t.textMessage},on:{input:function(e){e.target.composing||(t.textMessage=e.target.value)}}}),o("button",{staticClass:"btn sendMessage",attrs:{type:"button"},on:{click:function(e){return t.clickButton()}}},[t._v("Send")])]),o("div",{staticClass:"userOnline"},[o("h2",[t._v("online")]),t._l(t.userOnline,(function(e){return o("li",{key:e.id},[t._v(" "+t._s(e)+" ")])}))],2)])])},A=[],E=(o("4de4"),o("c975"),o("d3b7"),o("96cf"),o("8055")),$=o.n(E),j={name:"ChatPage",props:{msg:String,user:Object},data:function(){return{data:"text data message",socket:$()("http://localhost:5000"),textMessage:"",chatHistory:[],userData:"",historyPage:0,pauseToLoad:!1,chatHeight:0,userOnline:[]}},sockets:{connect:function(){console.log("socket connected")},customEmit:function(t){console.log('this method was fired by the socket server. eg: io.emit("customEmit", data)')}},methods:{clickButton:function(){this.socket.emit("send mess",this.textMessage),this.textMessage=""},getHistory:function(){this.socket.emit("getHistory",this.historyPage),this.historyPage++},listen:function(){var t=this;this.socket.on("add mess",(function(e){e.time=t.timedecode(e.time),t.chatHistory.push(e),t.$nextTick((function(){t.$refs.chat.scrollTop=t.$refs.chat.scrollHeight+2e4}))})),this.socket.on("loadHistory",(function(e){if(e.login==t.user.login&&e.history.length>0){for(var o=0;o<e.history.length;o++){var s={};s.time=t.timedecode(e.history[o].time),s.user=e.history[o].login,s.msg=e.history[o].message,t.chatHistory.unshift(s)}t.$nextTick((function(){0==t.chatHeight?(t.chatHeight=t.$refs.chat.scrollHeight,t.$refs.chat.scrollTop=5e4):t.$refs.chat.scrollTop=600}))}})),this.socket.on("loadUsers",(function(e){t.userOnline=e.filter((function(t,o){return e.indexOf(t)==o}))})),this.socket.on("error",(function(t){console.log(t)}))},onScroll:function(){var t=this;this.$refs.chat.scrollTop<50&&!this.pauseToLoad&&(this.pauseToLoad=!0,this.getHistory(),setTimeout((function(){t.pauseToLoad=!1}),10))},timedecode:function(t){t=+t;var e=new Date(t),o=e.getHours(),s=e.getMinutes(),n=e.getSeconds();return s<10&&(s="0"+s),n<10&&(n="0"+n),o+":"+s+":"+n}},created:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:this.listen(),this.socket.emit("user",this.user.login);case 2:case"end":return t.stop()}}),null,this)},mounted:function(){this.getHistory()}},z=j,D=(o("0659"),Object(d["a"])(z,U,A,!1,null,null,null)),N=D.exports,B=new M["a"]({routes:[{path:"/home",component:S},{path:"/chat",component:N}],mode:"history"});s["a"].config.productionTip=!1,s["a"].use(M["a"]),new s["a"]({render:function(t){return t(x)},router:B}).$mount("#app")},"5c0b":function(t,e,o){"use strict";var s=o("9c0c"),n=o.n(s);n.a},8475:function(t,e,o){},"9c0c":function(t,e,o){},af35:function(t,e,o){},b911:function(t,e,o){},da96:function(t,e,o){}});
//# sourceMappingURL=app.244c12a7.js.map